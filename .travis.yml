dist: trusty
language: java
jdk:
- openjdk11
before_install:
- chmod +x mvn-demo.sh
install: true
script:
- echo "before install"
- mvn clean install
- echo "after install"
#- ./mvn-demo.sh
deploy:
  - provider: script
    script: "mvn --settings travis/settings.xml versions:set -DnewVersion=${TRAVIS_TAG} && mvn --settings travis/settings.xml clean deploy -DskipITs=true -DskipTests=true -B -U -P release"
    on:
      tags: true
  - provider: script
    script: "mvn --settings .travis/mvn-settings.xml -DskipTests=true clean deploy"
    on:
      branch: aligned-spring
#- mvn clean deploy
#  on:
#    branch: aligned-spring
after_success:
- bash <(curl -s https://codecov.io/bash)
after_failure:
- ./print_test_reports.sh
